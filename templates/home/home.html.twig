{% extends 'base.html.twig' %}

{% block title %}{% trans %}Accueil{% endtrans %}{% endblock %}

{% block body %}
<section>
    <h1>{% trans %}Accueil{% endtrans %}</h1>  

    {% for newsletter in newsletters %}
    <article>
        <img src="{{ asset(newsletter.thumb) | imagine_filter('my_thumb') }}" alt="{% trans %}Image introductive relative à la nouvelle.{% endtrans %}">

        <h2>{% trans %}Publié le{% endtrans %} {{ newsletter.newCreatedAt|date('Y-m-d') }}</h2>
        <p>
            {% if attribute(newsletter, 'newContent'~app.request.locale|capitalize) is not empty %}
                {{ attribute(newsletter, 'newContent'~app.request.locale|capitalize)|length > 25 ? attribute(newsletter, 'newContent'~app.request.locale|capitalize)|slice(0,25) ~ '...' : attribute(newsletter, 'newContent'~app.request.locale|capitalize) }}
            {% else %}
                {{ newsletter.newContentFr|length > 25 ? newsletter.newContentFr|slice(0,25) ~ '...' : newsletter.newContentFr }}
            {% endif %}
        </p>

        <a href="/{{ app.request.locale }}/actualite/{{ newsletter.id }}">{% trans %}Voir{% endtrans %}</a>
    
    </article>
    {% endfor %}
    
    <div>
        <a href="/{{ app.request.locale }}/actualites/{{ 1 }}">{% trans %}Tout voir{% endtrans %}</a>
    </div>
    
</section>

<section>
    <h1>{% trans %}Evènements{% endtrans %}</h1>  

    {% for action in actions %}
    <article>
        <img src="{{ asset(action.thumb) | imagine_filter('my_thumb') }}" alt="{% trans %}Image introductive relative à l'évènement.{% endtrans %}">

        <p>{% trans %}Du{% endtrans %} {{ action.actBegining|date('Y-m-d') }} {% trans %}au{% endtrans %} {{ action.actEnd|date('Y-m-d') }}</p>
        <p>
            {% if attribute(action, 'actContent'~app.request.locale|capitalize) is not empty %}
                {{ attribute(action, 'actContent'~app.request.locale|capitalize)|length > 25 ? attribute(action, 'actContent'~app.request.locale|capitalize)|slice(0,25) ~ '...' : attribute(action, 'actContent'~app.request.locale|capitalize) }}
            {% else %}
                {{ action.actContentFr|length > 25 ? action.actContentFr|slice(0,25) ~ '...' : action.actContentFr }}
            {% endif %}
        </p>

        <a href="/{{ app.request.locale }}/evenement/{{ action.id }}">{% trans %}Voir{% endtrans %}</a>
    
    </article>
    {% endfor %}
    
    <div>
        <a href="/{{ app.request.locale }}/evenements/{{ 1 }}">{% trans %}Tout voir{% endtrans %}</a>
    </div>
    
</section>
{% endblock %}
